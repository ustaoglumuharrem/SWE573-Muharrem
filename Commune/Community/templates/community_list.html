{% extends 'base.html' %}

{% block content %}
    <h1>Communities</h1>
    <br/>   
    {% for item in communities_with_roles %}

        {% if item.community.type == False %}
            <strong>{{ item.community }}</strong>
            <a href="{% url 'show_posts' item.community.id %}">View Post</a> 

            {% if item.owner  or item.member  or item.moderator %}
                <a href="{% url 'show-community' item.community.id %}">Add Post</a>
                <a href="{% url 'members_community' item.community.id %}">Members</a> 
  
                {% if item.owner  or item.moderator  %}
                
                    <a href="{% url 'update-community' item.community.id %}">Update</a> 
                    <a href="{% url 'all_communities_user' item.community.id %}">User Management</a>
                    <a href="{% url 'invite_user' item.community.id %}">Invite User</a> 
                    <a href="{% url 'create_template' item.community.id %}">Create Template</a>
                {% endif %}

                {% if item.moderator  or item.member  %}
                    <a href="{% url 'remove-community' item.community.id %}">Remove</a> 
                {% endif %}
            {% else %}
                <a href="{% url 'join-community' item.community.id %}">Join</a> 
            {% endif %}
        {% else %}
            
            {% if item.owner  or item.member  or item.moderator %}
                <strong>{{ item.community }}</strong>
                <a href="{% url 'show_posts' item.community.id %}">View Post</a> 
                <a href="{% url 'show-community' item.community.id %}">Add Post</a>
                <a href="{% url 'members_community' item.community.id %}">-Members</a> 

                {% if item.owner  or item.moderator  %}
        
                    <a href="{% url 'update-community' item.community.id %}">-Update</a> 
                    <a href="{% url 'all_communities_user' item.community.id %}">-User Management</a>
                    <a href="{% url 'invite_user' item.community.id %}">-Invite User</a> 
                    <a href="{% url 'create_template' item.community.id %}">-Create Template</a>
                {% endif %}

                {% if item.moderator  or item.member  %}
                    <a href="{% url 'remove-community' item.community.id %}">-Remove</a> 
                {% endif %}
            {% else %}
              
            {% endif %}
            
        {% endif %} 
        
        <br/>
    {% endfor %}
{% endblock %}
